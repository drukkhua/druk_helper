#!/usr/bin/env python3
"""
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞ –≤ –±–æ—Ç–µ
"""

import sys
import os
import asyncio

sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from src.ai.enhanced_ai_service import enhanced_ai_service


async def demo_auto_language():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –≤ AI —Å–µ—Ä–≤–∏—Å–µ"""

    print("=== –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞ ===\n")

    # –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö
    test_queries = [
        ("–°–∫—ñ–ª—å–∫–∏ –∫–æ—à—Ç—É—é—Ç—å –≤—ñ–∑–∏—Ç–∫–∏?", "—É–∫—Ä–∞–∏–Ω—Å–∫–∏–π"),
        ("–°–∫–æ–ª—å–∫–æ —Å—Ç–æ—è—Ç –≤–∏–∑–∏—Ç–∫–∏?", "—Ä—É—Å—Å–∫–∏–π"),
        ("–©–æ —Ç–∞–∫–µ —Ç–∏—Å–Ω–µ–Ω–Ω—è —Ñ–æ–ª—å–≥–æ—é?", "—É–∫—Ä–∞–∏–Ω—Å–∫–∏–π"),
        ("–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–∏—Å–Ω–µ–Ω–∏–µ —Ñ–æ–ª—å–≥–æ–π?", "—Ä—É—Å—Å–∫–∏–π"),
        ("–ü–æ—Ç—Ä—ñ–±–Ω–æ –Ω–∞–¥—Ä—É–∫—É–≤–∞—Ç–∏ —Ñ—É—Ç–±–æ–ª–∫–∏", "—É–∫—Ä–∞–∏–Ω—Å–∫–∏–π"),
        ("–ù—É–∂–Ω–æ –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —Ñ—É—Ç–±–æ–ª–∫–∏", "—Ä—É—Å—Å–∫–∏–π"),
    ]

    user_id = 12345  # –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

    for query, expected_lang in test_queries:
        print(f"üìù –ó–∞–ø—Ä–æ—Å: '{query}'")
        print(f"üéØ –û–∂–∏–¥–∞–µ–º—ã–π —è–∑—ã–∫: {expected_lang}")

        try:
            # –í—ã–∑—ã–≤–∞–µ–º AI —Å–µ—Ä–≤–∏—Å –ë–ï–ó —É–∫–∞–∑–∞–Ω–∏—è —è–∑—ã–∫–∞ - –æ–Ω –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è
            result = await enhanced_ai_service.process_query(
                user_query=query, user_id=user_id, language=None  # –Ø–∑—ã–∫ –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ–º!
            )

            print(f"ü§ñ –û—Ç–≤–µ—Ç: {result['answer'][:100]}...")
            print(f"üìä –ò—Å—Ç–æ—á–Ω–∏–∫: {result['source']}")
            print(f"üíØ –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: {result['confidence']:.2f}")

        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

        print("-" * 60)


if __name__ == "__main__":
    # –ó–∞–ø—É—Å–∫–∞–µ–º –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é
    asyncio.run(demo_auto_language())
